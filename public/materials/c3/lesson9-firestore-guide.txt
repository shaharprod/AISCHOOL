××“×¨×™×š Firestore Database
==========================

×©×™×¢×•×¨ 9: Firestore Database
============================

××‘×•×
====

×‘×©×™×¢×•×¨ ×–×” × ×œ××“ ×›×™×¦×“ ×œ×¢×‘×•×“ ×¢×
Firestore Database ×‘-Firebase.

×”×ª×§× ×”
======

```bash
npm install firebase
```

×”×’×“×¨×”
======

```javascript
// firebase.js
import { initializeApp } from 'firebase/app';
import { getFirestore } from 'firebase/firestore';

const app = initializeApp(firebaseConfig);
export const db = getFirestore(app);
```

×™×¦×™×¨×ª × ×ª×•× ×™×
=============

××” ×–×” ×¢×•×©×”?
-----------
×™×¦×™×¨×ª ××¡××š ×—×“×© ×‘-Firestore ×¢× error handling. ×™×•×¦×¨ ××©×ª××© ×—×“×© ×•××“×¤×™×¡ ××ª ×”-ID ×©× ×•×¦×¨.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **try/catch**: ×ª×•×¤×¡ ×©×’×™××•×ª ×•××˜×¤×œ ×‘×”×Ÿ
2. **addDoc**: ×™×•×¦×¨ ××¡××š ×—×“×© ×‘-collection
3. **docRef.id**: ××—×–×™×¨ ××ª ×”-ID ×”×™×™×—×•×“×™ ×©× ×•×¦×¨

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `try/catch`: ×—×©×•×‘ ×œ×˜×™×¤×•×œ ×‘×©×’×™××•×ª - Firestore ×™×›×•×œ ×œ×–×¨×•×§ ×©×’×™××•×ª
- `collection(db, 'users')`: ××¦×‘×™×¢ ×¢×œ collection ×‘×©× 'users'
- `addDoc`: ×™×•×¦×¨ ××¡××š ×—×“×© ×¢× ID ××•×˜×•××˜×™
- `docRef.id`: ×”-ID ×”×™×™×—×•×“×™ ×©× ×•×¦×¨ - ×©×™××•×©×™ ×œ×¢×“×›×•× ×™× ×¢×ª×™×“×™×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×™×¦×™×¨×ª ×¨×©×•××•×ª ×—×“×©×•×ª ×¢× error handling
âœ“ ×›××©×¨ ×¦×¨×™×š ××ª ×”-ID ×©× ×•×¦×¨
âœ“ ××¤×œ×™×§×¦×™×•×ª ×©×¦×¨×™×›×•×ª ×˜×™×¤×•×œ ×‘×©×’×™××•×ª

×˜×™×¤×™×:
------
ğŸ’¡ ×ª××™×“ ×”×©×ª××© ×‘-try/catch ×œ×¤×¢×•×œ×•×ª Firestore
ğŸ’¡ `docRef.id` ×©×™××•×©×™ ×× ×¦×¨×™×š ×œ×¢×“×›×Ÿ ××ª ×”××¡××š ××™×“ ××—×¨×™ ×™×¦×™×¨×”
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ validation ×œ×¤× ×™ ×”×™×¦×™×¨×”
ğŸ’¡ ×‘×“×•×§ ×”×¨×©××•×ª ×‘-Firestore Security Rules

```jsx
import { collection, addDoc } from 'firebase/firestore';
import { db } from './firebase';

const addUser = async () => {
  try {
    const docRef = await addDoc(collection(db, 'users'), {
      name: 'John',
      email: 'john@example.com'
    });
    console.log('Document written with ID:', docRef.id);
  } catch (error) {
    console.error('Error:', error);
  }
};
```

×§×¨×™××ª × ×ª×•× ×™×
=============

××” ×–×” ×¢×•×©×”?
-----------
×§×¨×™××ª ×›×œ ×”××¡××›×™× ×‘-collection ×•×”×“×¤×¡×ª×. ×–×”×• one-time read - ×œ× ××ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **getDocs**: ×§×•×¨× ××ª ×›×œ ×”××¡××›×™× ×‘-collection
2. **forEach**: ×¢×•×‘×¨ ×¢×œ ×›×œ ××¡××š
3. **doc.data()**: ××§×‘×œ ××ª ×”× ×ª×•× ×™× ×©×œ ×›×œ ××¡××š

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `getDocs`: ×§×•×¨× ××ª ×›×œ ×”××¡××›×™× (one-time read)
- `querySnapshot`: ××•×‘×™×™×§×˜ ×©××›×™×œ ××ª ×›×œ ×”××¡××›×™×
- `forEach`: ×¢×•×‘×¨ ×¢×œ ×›×œ ××¡××š
- `doc.id`: ×”-ID ×”×™×™×—×•×“×™ ×©×œ ×”××¡××š
- `doc.data()`: ×”× ×ª×•× ×™× ×©×œ ×”××¡××š

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×˜×¢×™× ×” ×¨××©×•× ×™×ª ×©×œ × ×ª×•× ×™×
âœ“ ×›××©×¨ ×œ× ×¦×¨×™×š ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª
âœ“ ×§×¨×™××” ×—×“-×¤×¢××™×ª ×©×œ × ×ª×•× ×™×

×˜×™×¤×™×:
------
ğŸ’¡ `getDocs` ×”×•× one-time read - ×œ× ××ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª
ğŸ’¡ ×œ× ×ª×•× ×™× ×©××©×ª× ×™×, ×”×©×ª××© ×‘-`onSnapshot` ×‘××§×•×
ğŸ’¡ ××¤×©×¨ ×œ×”×©×ª××© ×‘-`map` ×‘××§×•× `forEach` ×œ×™×¦×™×¨×ª ××¢×¨×š

```jsx
import { collection, getDocs } from 'firebase/firestore';

const getUsers = async () => {
  const querySnapshot = await getDocs(collection(db, 'users'));
  querySnapshot.forEach((doc) => {
    console.log(doc.id, '=>', doc.data());
  });
};
```

×¢×“×›×•×Ÿ × ×ª×•× ×™×
=============

××” ×–×” ×¢×•×©×”?
-----------
×¢×“×›×•×Ÿ ×©×“×•×ª ×‘××¡××š ×§×™×™×. ××¢×“×›×Ÿ ×¨×§ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™×, ×œ× ××—×œ×™×£ ××ª ×›×œ ×”××¡××š.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **doc**: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
2. **updateDoc**: ××¢×“×›×Ÿ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™×
3. **merge**: ×¢×“×›×•×Ÿ ×—×œ×§×™ - ×¨×§ ×”×©×“×•×ª ×©××•×¢×‘×¨×™× ××ª×¢×“×›× ×™×

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `doc(db, 'users', userId)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
- `updateDoc`: ××¢×“×›×Ÿ ×©×“×•×ª ×‘××¡××š ×§×™×™×
- ×¢×“×›×•×Ÿ ×—×œ×§×™: ×¨×§ ×”×©×“×•×ª ×©××•×¢×‘×¨×™× ××ª×¢×“×›× ×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×¢×“×›×•×Ÿ ×¤×¨×•×¤×™×œ ××©×ª××©
âœ“ ×©×™× ×•×™ ×¡×˜×˜×•×¡
âœ“ ×¢×“×›×•×Ÿ × ×ª×•× ×™× ×—×œ×§×™

×˜×™×¤×™×:
------
ğŸ’¡ `updateDoc` ××¢×“×›×Ÿ ×¨×§ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™×
ğŸ’¡ ×× ×”××¡××š ×œ× ×§×™×™×, `updateDoc` ×™×–×¨×•×§ ×©×’×™××”
ğŸ’¡ ×œ×”×©×ª××© ×‘-`setDoc` ×¢× `merge: true` ×œ×¢×“×›×•×Ÿ ××• ×™×¦×™×¨×”
ğŸ’¡ ×ª××™×“ ×”×•×¡×£ error handling

```jsx
import { doc, updateDoc } from 'firebase/firestore';

const updateUser = async (userId) => {
  const userRef = doc(db, 'users', userId);
  await updateDoc(userRef, {
    name: 'Jane'
  });
};
```

××—×™×§×ª × ×ª×•× ×™×
=============

××” ×–×” ×¢×•×©×”?
-----------
××—×™×§×ª ××¡××š ×-Firestore. ×”××¡××š × ××—×§ ×œ×—×œ×•×˜×™×Ÿ ×•×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨ ××•×ª×•.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **doc**: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
2. **deleteDoc**: ××•×—×§ ××ª ×”××¡××š ××”-collection

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `doc(db, 'users', userId)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™
- `deleteDoc`: ××•×—×§ ××ª ×”××¡××š ×œ×—×œ×•×˜×™×Ÿ
- ××—×™×§×” ×œ×¦××™×ª×•×ª: ××™×Ÿ ××¤×©×¨×•×ª ×œ×©×—×–×¨

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ××—×™×§×ª ××©×ª××©×™×
âœ“ ×”×¡×¨×ª ×¤×¨×™×˜×™×
âœ“ ××—×™×§×ª × ×ª×•× ×™× ×™×©× ×™×

×˜×™×¤×™×:
------
ğŸ’¡ ××—×™×§×” ×”×™× ×œ×¦××™×ª×•×ª - ××™×Ÿ ××¤×©×¨×•×ª ×œ×©×—×–×¨
ğŸ’¡ ×× ×”××¡××š ×œ× ×§×™×™×, `deleteDoc` ×œ× ×™×–×¨×•×§ ×©×’×™××”
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ `deletedAt` timestamp ×œ×¤× ×™ ××—×™×§×” (soft delete)
ğŸ’¡ ×ª××™×“ ×”×•×¡×£ confirmation ×œ×¤× ×™ ××—×™×§×”

```jsx
import { doc, deleteDoc } from 'firebase/firestore';

const deleteUser = async (userId) => {
  await deleteDoc(doc(db, 'users', userId));
};
```

Real-time Updates
=================

××” ×–×” ×¢×•×©×”?
-----------
×”××–× ×” ×œ×©×™× ×•×™×™× ×‘-Firestore ×‘×–××Ÿ ×××ª. ×›×œ ×©×™× ×•×™ ×‘-collection ××¢×“×›×Ÿ ××ª ×”×××©×§ ××•×˜×•××˜×™×ª.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **onSnapshot**: ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘-collection
2. **callback**: ××ª×‘×¦×¢ ×‘×›×œ ×©×™× ×•×™ (×™×¦×™×¨×”, ×¢×“×›×•×Ÿ, ××—×™×§×”)
3. **unsubscribe**: ××¤×¡×™×§ ××ª ×”×”××–× ×” ×›×©×”×§×•××¤×•× × ×˜×” × ×”×¨×¡×ª

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `onSnapshot`: ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘×–××Ÿ ×××ª
- `collection(db, 'users')`: ×”-collection ×œ×”××–× ×”
- callback: ××ª×‘×¦×¢ ×‘×›×œ ×©×™× ×•×™ - ××§×‘×œ snapshot ××¢×•×“×›×Ÿ
- `unsubscribe`: ×¤×•× ×§×¦×™×” ×œ×”×¤×¡×§×ª ×”×”××–× ×”
- `return unsubscribe`: ×—×©×•×‘ ×œ×× ×™×¢×ª memory leaks

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×¨×©×™××•×ª ×©××ª×¢×“×›× ×•×ª ×‘×–××Ÿ ×××ª
âœ“ ×¦'××˜×™× ××• ×”×•×“×¢×•×ª
âœ“ ××¤×œ×™×§×¦×™×•×ª ×©×™×ª×•×¤×™×•×ª
âœ“ dashboards ×¢× × ×ª×•× ×™× ×—×™×™×

×˜×™×¤×™×:
------
ğŸ’¡ ×ª××™×“ ×”×—×–×¨ ××ª `unsubscribe` ×‘-useEffect cleanup
ğŸ’¡ `onSnapshot` ××ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª - ××™×Ÿ ×¦×•×¨×š ×œ×¨×¢× ×Ÿ ×™×“× ×™×ª
ğŸ’¡ ×›×œ ×©×™× ×•×™ ×‘-Firestore (×™×¦×™×¨×”, ×¢×“×›×•×Ÿ, ××—×™×§×”) ××¤×¢×™×œ ××ª ×”-callback
ğŸ’¡ ××¤×©×¨ ×œ×”×©×ª××© ×‘-`onSnapshot` ×¢× query ×œ×¡× ×Ÿ ××¡××›×™×

```jsx
import { collection, onSnapshot } from 'firebase/firestore';

useEffect(() => {
  const unsubscribe = onSnapshot(
    collection(db, 'users'),
    (snapshot) => {
      const users = snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      }));
      setUsers(users);
    }
  );

  return unsubscribe;
}, []);
```

×¡×™×›×•×
======

×¢×›×©×™×• ××ª×” ×™×•×“×¢:
âœ“ ××™×š ×œ×¢×‘×•×“ ×¢× Firestore
âœ“ ××™×š ×œ×™×¦×•×¨, ×œ×§×¨×•×, ×œ×¢×“×›×Ÿ ×•×œ××—×•×§ × ×ª×•× ×™×
âœ“ ××™×š ×œ×”×©×ª××© ×‘-Real-time Updates

×‘×©×™×¢×•×¨ ×”×‘× × ×œ××“:
â†’ Testing ×‘-IDX
â†’ ×›×ª×™×‘×ª ×‘×“×™×§×•×ª

××•×›× ×™× ×œ×”××©×™×š? ğŸš€

---
Â© 2026 Google AI Academy
××“×¨×™×š Firestore
×’×¨×¡×” 1.0
