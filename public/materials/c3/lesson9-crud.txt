CRUD Operations ×‘-Firestore
============================

×©×™×¢×•×¨ 9: CRUD Operations
=========================

××‘×•×
====

××“×¨×™×š ××§×™×£ ×œ-CRUD Operations ×‘-Firestore.

Create - ×™×¦×™×¨×”
===============

××” ×–×” ×¢×•×©×”?
-----------
×™×¦×™×¨×ª ××¡××š ×—×“×© ×‘-Firestore collection. ×”×¤×•× ×§×¦×™×” ×™×•×¦×¨×ª ××©×ª××© ×—×“×© ×¢× ×©× ×•××™××™×™×œ.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **collection**: ××¦×‘×™×¢ ×¢×œ collection ×‘×©× 'users'
2. **addDoc**: ×™×•×¦×¨ ××¡××š ×—×“×© ×¢× ID ××•×˜×•××˜×™
3. **×ª××¨×™×š ××•×˜×•××˜×™**: `createdAt` ×©×•××¨ ××ª ×–××Ÿ ×”×™×¦×™×¨×”
4. **×”×—×–×¨×ª ID**: ××—×–×™×¨ ××ª ×”-ID ×©×œ ×”××¡××š ×©× ×•×¦×¨

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `collection(db, 'users')`: ××¦×‘×™×¢ ×¢×œ collection ×‘×©× 'users'
- `addDoc`: ×™×•×¦×¨ ××¡××š ×—×“×© - Firestore ×™×•×¦×¨ ID ××•×˜×•××˜×™×ª
- `docRef.id`: ×”-ID ×”×™×™×—×•×“×™ ×©×œ ×”××¡××š ×©× ×•×¦×¨
- `createdAt`: ×©×“×” timestamp ×©×™××•×©×™ ×œ×¡×™×“×•×¨ ×•× ×™×¤×•×™ ×‘××’×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×™×¦×™×¨×ª ×¨×©×•××•×ª ×—×“×©×•×ª (××©×ª××©×™×, ×¤×•×¡×˜×™×, ××•×¦×¨×™×)
âœ“ ×”×•×¡×¤×ª × ×ª×•× ×™× ×—×“×©×™× ×œ×××’×¨
âœ“ ×¨×™×©×•× ××©×ª××©×™× ×—×“×©×™×

×˜×™×¤×™×:
------
ğŸ’¡ `addDoc` ×™×•×¦×¨ ID ××•×˜×•××˜×™×ª - ××™×Ÿ ×¦×•×¨×š ×œ×™×¦×•×¨ ID ×™×“× ×™×ª
ğŸ’¡ ×ª××™×“ ×©××•×¨ `createdAt` - ×¢×•×–×¨ ×œ×¡×™×“×•×¨ ×•× ×™×¤×•×™ ×‘××’×™×
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ validation ×œ×¤× ×™ ×”×™×¦×™×¨×”
ğŸ’¡ `docRef.id` ×©×™××•×©×™ ×× ×¦×¨×™×š ×œ×¢×“×›×Ÿ ××ª ×”××¡××š ××™×“ ××—×¨×™ ×™×¦×™×¨×”

```jsx
import { collection, addDoc } from 'firebase/firestore';

const createUser = async (name, email) => {
  const docRef = await addDoc(collection(db, 'users'), {
    name,
    email,
    createdAt: new Date()
  });
  return docRef.id;
};
```

Read - ×§×¨×™××”
============

××” ×–×” ×¢×•×©×”?
-----------
×§×¨×™××ª × ×ª×•× ×™× ×-Firestore - ×›×œ ×”××¡××›×™×, ××¡××š ××—×“, ××• ××¡××›×™× ×œ×¤×™ ×ª× ××™×.

×›×œ ×”××¡××›×™×:
------------

××™×š ×–×” ×¢×•×‘×“?
------------
1. **getDocs**: ×§×•×¨× ××ª ×›×œ ×”××¡××›×™× ×‘-collection
2. **snapshot**: ××•×‘×™×™×§×˜ ×©××›×™×œ ××ª ×›×œ ×”××¡××›×™×
3. **mapping**: ×××™×¨ ×›×œ ××¡××š ×œ××•×‘×™×™×§×˜ ×¢× ID ×•× ×ª×•× ×™×

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `getDocs`: ×§×•×¨× ××ª ×›×œ ×”××¡××›×™× ×‘-collection (×œ× ×‘×–××Ÿ ×××ª)
- `snapshot.docs`: ××¢×¨×š ×©×œ ×›×œ ×”××¡××›×™×
- `doc.id`: ×”-ID ×”×™×™×—×•×“×™ ×©×œ ×”××¡××š
- `doc.data()`: ×”× ×ª×•× ×™× ×©×œ ×”××¡××š

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×˜×¢×™× ×” ×¨××©×•× ×™×ª ×©×œ × ×ª×•× ×™×
âœ“ ×¨×©×™××•×ª ××œ××•×ª
âœ“ ×›××©×¨ ×œ× ×¦×¨×™×š ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª

×˜×™×¤×™×:
------
ğŸ’¡ `getDocs` ×”×•× one-time read - ×œ× ××ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª
ğŸ’¡ ×œ× ×ª×•× ×™× ×©××©×ª× ×™×, ×”×©×ª××© ×‘-`onSnapshot` ×‘××§×•×
ğŸ’¡ ×ª××™×“ ×›×œ×•×œ ××ª ×”-ID ×‘× ×ª×•× ×™× ×©××•×—×–×¨×™×

```jsx
import { collection, getDocs } from 'firebase/firestore';

const getAllUsers = async () => {
  const snapshot = await getDocs(collection(db, 'users'));
  return snapshot.docs.map(doc => ({
    id: doc.id,
    ...doc.data()
  }));
};
```

××¡××š ××—×“:
---------

××™×š ×–×” ×¢×•×‘×“?
------------
1. **doc**: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
2. **getDoc**: ×§×•×¨× ××ª ×”××¡××š
3. **exists**: ×‘×•×“×§ ×× ×”××¡××š ×§×™×™×

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `doc(db, 'users', userId)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™
- `getDoc`: ×§×•×¨× ××ª ×”××¡××š (one-time read)
- `docSnap.exists()`: ×‘×•×“×§ ×× ×”××¡××š ×§×™×™× ×œ×¤× ×™ ×’×™×©×” ×œ× ×ª×•× ×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×§×¨×™××ª ×¤×¨×•×¤×™×œ ××©×ª××©
âœ“ ×˜×¢×™× ×ª ×¤×¨×˜×™ ××•×¦×¨
âœ“ ×’×™×©×” ×œ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID

×˜×™×¤×™×:
------
ğŸ’¡ ×ª××™×“ ×‘×“×•×§ `exists()` ×œ×¤× ×™ ×’×™×©×” ×œ× ×ª×•× ×™×
ğŸ’¡ ×× ×”××¡××š ×œ× ×§×™×™×, ×”×—×–×¨ null ××• ×–×¨×•×§ ×©×’×™××”
ğŸ’¡ `getDoc` ×”×•× one-time read - ×œ× ××ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª

```jsx
import { doc, getDoc } from 'firebase/firestore';

const getUser = async (userId) => {
  const docRef = doc(db, 'users', userId);
  const docSnap = await getDoc(docRef);
  
  if (docSnap.exists()) {
    return { id: docSnap.id, ...docSnap.data() };
  } else {
    return null;
  }
};
```

×¢× Query:
----------

××™×š ×–×” ×¢×•×‘×“?
------------
1. **query**: ×™×•×¦×¨ query ×¢× ×ª× ××™×
2. **where**: ××¡× ×Ÿ ××¡××›×™× ×œ×¤×™ ×ª× ××™
3. **getDocs**: ×§×•×¨× ××ª ×”××¡××›×™× ×©×¢×•× ×™× ×¢×œ ×”×ª× ××™

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `query()`: ×™×•×¦×¨ query ××•×ª××
- `where('email', '==', email)`: ××¡× ×Ÿ ××¡××›×™× ×œ×¤×™ email ×©×•×•×” ×œ×¢×¨×š
- ××•×¤×¨×˜×•×¨×™× × ×•×¡×¤×™×: `!=`, `>`, `<`, `>=`, `<=`, `in`, `array-contains`

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×—×™×¤×•×© ××©×ª××©×™× ×œ×¤×™ ××™××™×™×œ
âœ“ ×¡×™× ×•×Ÿ ××•×¦×¨×™× ×œ×¤×™ ×§×˜×’×•×¨×™×”
âœ“ ××¦×™××ª ××¡××›×™× ×œ×¤×™ ×ª× ××™×

×˜×™×¤×™×:
------
ğŸ’¡ `where` ×“×•×¨×© index ×‘-Firestore - Firestore ×™×‘×§×© ×œ×™×¦×•×¨ ××•×ª×• ××•×˜×•××˜×™×ª
ğŸ’¡ ××¤×©×¨ ×œ×©×œ×‘ ××¡×¤×¨ `where` clauses
ğŸ’¡ ×”×©×ª××© ×‘-`==` ×œ×©×•×•×™×•×Ÿ, `>`/`<` ×œ×”×©×•×•××•×ª ××¡×¤×¨×™×•×ª
ğŸ’¡ `in` ×¢×•×‘×“ ×¢× ××¢×¨×›×™× - `where('status', 'in', ['active', 'pending'])`

```jsx
import { collection, query, where, getDocs } from 'firebase/firestore';

const getUsersByEmail = async (email) => {
  const q = query(
    collection(db, 'users'),
    where('email', '==', email)
  );
  const snapshot = await getDocs(q);
  return snapshot.docs.map(doc => ({
    id: doc.id,
    ...doc.data()
  }));
};
```

Update - ×¢×“×›×•×Ÿ
===============

××” ×–×” ×¢×•×©×”?
-----------
×¢×“×›×•×Ÿ ×©×“×•×ª ×‘××¡××š ×§×™×™× ×‘-Firestore. ××¢×“×›×Ÿ ×¨×§ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™×, ×œ× ××—×œ×™×£ ××ª ×›×œ ×”××¡××š.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **doc**: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
2. **updateDoc**: ××¢×“×›×Ÿ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™×
3. **merge**: ×¢×“×›×•×Ÿ ×¨×§ ×”×©×“×•×ª ×©××•×¢×‘×¨×™×, ×œ× ××—×œ×™×£ ××ª ×›×œ ×”××¡××š

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `doc(db, 'users', userId)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™
- `updateDoc`: ××¢×“×›×Ÿ ×©×“×•×ª ×‘××¡××š ×§×™×™×
- `updates`: ××•×‘×™×™×§×˜ ×¢× ×”×©×“×•×ª ×œ×¢×“×›×•×Ÿ
- ×¢×“×›×•×Ÿ ×—×œ×§×™: ×¨×§ ×”×©×“×•×ª ×©××•×¢×‘×¨×™× ××ª×¢×“×›× ×™×, ×”×©××¨ × ×©××¨×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ×¢×“×›×•×Ÿ ×¤×¨×•×¤×™×œ ××©×ª××©
âœ“ ×©×™× ×•×™ ×¡×˜×˜×•×¡ (completed, active, ×•×›×•')
âœ“ ×¢×“×›×•×Ÿ × ×ª×•× ×™× ×—×œ×§×™

×˜×™×¤×™×:
------
ğŸ’¡ `updateDoc` ××¢×“×›×Ÿ ×¨×§ ××ª ×”×©×“×•×ª ×©××•×¢×‘×¨×™× - ×œ× ××—×œ×™×£ ××ª ×›×œ ×”××¡××š
ğŸ’¡ ×× ×”××¡××š ×œ× ×§×™×™×, `updateDoc` ×™×–×¨×•×§ ×©×’×™××”
ğŸ’¡ ×œ×”×©×ª××© ×‘-`setDoc` ×¢× `merge: true` ×œ×¢×“×›×•×Ÿ ××• ×™×¦×™×¨×”
ğŸ’¡ ××¤×©×¨ ×œ×¢×“×›×Ÿ ×©×“×•×ª nested ×¢× dot notation: `{ 'address.city': 'Tel Aviv' }`

```jsx
import { doc, updateDoc } from 'firebase/firestore';

const updateUser = async (userId, updates) => {
  const userRef = doc(db, 'users', userId);
  await updateDoc(userRef, updates);
};

// ×©×™××•×©:
updateUser('123', { name: 'Jane', age: 25 });
```

Delete - ××—×™×§×”
===============

××” ×–×” ×¢×•×©×”?
-----------
××—×™×§×ª ××¡××š ×-Firestore collection. ×”××¡××š × ××—×§ ×œ×—×œ×•×˜×™×Ÿ ×•×œ× × ×™×ª×Ÿ ×œ×©×—×–×¨ ××•×ª×•.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **doc**: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID
2. **deleteDoc**: ××•×—×§ ××ª ×”××¡××š ××”-collection

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `doc(db, 'users', userId)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™
- `deleteDoc`: ××•×—×§ ××ª ×”××¡××š ×œ×—×œ×•×˜×™×Ÿ
- ××™×Ÿ ××¤×©×¨×•×ª ×œ×©×—×–×¨: ×”××¡××š × ××—×§ ×œ×¦××™×ª×•×ª

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ××—×™×§×ª ××©×ª××©×™×
âœ“ ×”×¡×¨×ª ×¤×¨×™×˜×™× ××¨×©×™××”
âœ“ ××—×™×§×ª × ×ª×•× ×™× ×™×©× ×™×

×˜×™×¤×™×:
------
ğŸ’¡ ××—×™×§×” ×”×™× ×œ×¦××™×ª×•×ª - ××™×Ÿ ××¤×©×¨×•×ª ×œ×©×—×–×¨
ğŸ’¡ ×× ×”××¡××š ×œ× ×§×™×™×, `deleteDoc` ×œ× ×™×–×¨×•×§ ×©×’×™××” (silent success)
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ `deletedAt` timestamp ×œ×¤× ×™ ××—×™×§×” (soft delete)
ğŸ’¡ ×‘×“×•×§ ×”×¨×©××•×ª ×œ×¤× ×™ ××—×™×§×” - ×œ× ×›×œ ××©×ª××© ×™×›×•×œ ×œ××—×•×§

```jsx
import { doc, deleteDoc } from 'firebase/firestore';

const deleteUser = async (userId) => {
  await deleteDoc(doc(db, 'users', userId));
};
```

×“×•×’××” ××œ××”
===========

××” ×–×” ×¢×•×©×”?
-----------
×“×•×’××” ××œ××” ×©×œ ××¤×œ×™×§×¦×™×™×ª × ×™×”×•×œ ××©×ª××©×™× ×¢× ×›×œ ×¤×¢×•×œ×•×ª CRUD - Create, Read, Update, Delete - ×¢× ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **Real-time List**: `onSnapshot` ××¢×“×›×Ÿ ××ª ×¨×©×™××ª ×”××©×ª××©×™× ×‘×–××Ÿ ×××ª
2. **Create**: ×™×•×¦×¨ ××©×ª××© ×—×“×© ×¢× ×©× ×•××™××™×™×œ
3. **Update**: ××¢×“×›×Ÿ ×©× ××©×ª××© ×§×™×™×
4. **Delete**: ××•×—×§ ××©×ª××© ××”×¨×©×™××”

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `onSnapshot`: ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘×–××Ÿ ×××ª - ×›×œ ×©×™× ×•×™ ×‘-Firestore ××¢×“×›×Ÿ ××ª ×”×××©×§
- `handleCreate`: ×™×•×¦×¨ ××©×ª××© ×—×“×© ×•×× ×§×” ××ª ×”×©×“×•×ª
- `handleUpdate`: ××¢×“×›×Ÿ ×©×“×•×ª ×‘××©×ª××© ×§×™×™×
- `handleDelete`: ××•×—×§ ××©×ª××© ××”-collection
- Form inputs: ×©×“×•×ª ×§×œ×˜ ×œ×™×¦×™×¨×ª ××©×ª××©×™× ×—×“×©×™×

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ××¤×œ×™×§×¦×™×•×ª × ×™×”×•×œ ××©×ª××©×™×
âœ“ ××¢×¨×›×•×ª CRUD ××œ××•×ª
âœ“ ×¨×©×™××•×ª ×“×™× ××™×•×ª ×¢× ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª
âœ“ ×œ×•×—×•×ª ×‘×§×¨×” ××• dashboards

×˜×™×¤×™×:
------
ğŸ’¡ ×–×”×• ×ª×‘× ×™×ª ×‘×¡×™×¡×™×ª - ×‘××¤×œ×™×§×¦×™×” ×××™×ª×™×ª ×”×•×¡×£ validation, error handling, ×•-loading states
ğŸ’¡ `onSnapshot` ××¢×“×›×Ÿ ××•×˜×•××˜×™×ª - ××™×Ÿ ×¦×•×¨×š ×œ×¨×¢× ×Ÿ ×™×“× ×™×ª
ğŸ’¡ ×ª××™×“ ×”×—×–×¨ ××ª unsubscribe function ×‘-useEffect
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ confirmation dialog ×œ×¤× ×™ ××—×™×§×”
ğŸ’¡ ×”×•×¡×£ error handling ×œ×›×œ ×¤×¢×•×œ×”

```jsx
import { useState, useEffect } from 'react';
import {
  collection,
  addDoc,
  getDocs,
  updateDoc,
  deleteDoc,
  doc,
  onSnapshot
} from 'firebase/firestore';
import { db } from './firebase';

function UsersList() {
  const [users, setUsers] = useState([]);
  const [name, setName] = useState('');
  const [email, setEmail] = useState('');

  // Real-time updates
  useEffect(() => {
    const unsubscribe = onSnapshot(
      collection(db, 'users'),
      (snapshot) => {
        setUsers(snapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        })));
      }
    );
    return unsubscribe;
  }, []);

  // Create
  const handleCreate = async () => {
    await addDoc(collection(db, 'users'), { name, email });
    setName('');
    setEmail('');
  };

  // Update
  const handleUpdate = async (userId, updates) => {
    await updateDoc(doc(db, 'users', userId), updates);
  };

  // Delete
  const handleDelete = async (userId) => {
    await deleteDoc(doc(db, 'users', userId));
  };

  return (
    <div>
      <input
        value={name}
        onChange={(e) => setName(e.target.value)}
        placeholder="Name"
      />
      <input
        value={email}
        onChange={(e) => setEmail(e.target.value)}
        placeholder="Email"
      />
      <button onClick={handleCreate}>Add User</button>

      <ul>
        {users.map(user => (
          <li key={user.id}>
            {user.name} - {user.email}
            <button onClick={() => handleUpdate(user.id, { name: 'Updated' })}>
              Update
            </button>
            <button onClick={() => handleDelete(user.id)}>Delete</button>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

×¡×™×›×•×
======

CRUD Operations:
âœ“ Create - ×™×¦×™×¨×”
âœ“ Read - ×§×¨×™××”
âœ“ Update - ×¢×“×›×•×Ÿ
âœ“ Delete - ××—×™×§×”

×‘×©×™×¢×•×¨ ×”×‘× × ×œ××“:
â†’ Testing ×‘-IDX
â†’ ×›×ª×™×‘×ª ×‘×“×™×§×•×ª

××•×›× ×™× ×œ×”××©×™×š? ğŸš€

---
Â© 2026 Google AI Academy
CRUD Operations
×’×¨×¡×” 1.0
