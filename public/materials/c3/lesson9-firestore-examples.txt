×“×•×’×××•×ª ×§×•×“ Firestore
=======================

×©×™×¢×•×¨ 9: ×“×•×’×××•×ª ×§×•×“
=====================

××‘×•×
====

×“×•×’×××•×ª ×§×•×“ ××¢×©×™×•×ª ×œ-Firestore.

×“×•×’××” 1: Todo App
==================

××” ×–×” ×¢×•×©×”?
-----------
×“×•×’××” ×–×• ××¨××” ××™×š ×œ×™×¦×•×¨ ××¤×œ×™×§×¦×™×™×ª Todo ××œ××” ×¢× Firestore - ×™×¦×™×¨×”, ×§×¨×™××”, ×¢×“×›×•×Ÿ ×•××—×™×§×” ×©×œ ××©×™××•×ª ×¢× ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **Real-time Updates**: `onSnapshot` ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘-collection ×•××¢×“×›×Ÿ ××ª ×”×××©×§ ××•×˜×•××˜×™×ª
2. **×™×¦×™×¨×ª Todo**: `addDoc` ×™×•×¦×¨ ××¡××š ×—×“×© ×‘-collection
3. **×¢×“×›×•×Ÿ Todo**: `updateDoc` ××¢×“×›×Ÿ ××ª ×¡×˜×˜×•×¡ ×”×”×©×œ××”
4. **××—×™×§×ª Todo**: `deleteDoc` ××•×—×§ ××¡××š ××”-collection

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `useState`: ×× ×”×œ ××ª ××¦×‘ ×”-todos ×•×”×§×œ×˜
- `useEffect`: ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘-Firestore ×›×©×”×§×•××¤×•× × ×˜×” × ×˜×¢× ×ª
- `onSnapshot`: ×××–×™×Ÿ ×œ×©×™× ×•×™×™× ×‘×–××Ÿ ×××ª - ×›×œ ×©×™× ×•×™ ×‘-Firestore ××¢×“×›×Ÿ ××ª ×”×××©×§
- `collection(db, 'todos')`: ××¦×‘×™×¢ ×¢×œ collection ×‘×©× 'todos'
- `addDoc`: ×™×•×¦×¨ ××¡××š ×—×“×© ×¢× ID ××•×˜×•××˜×™
- `updateDoc`: ××¢×“×›×Ÿ ×©×“×•×ª ×‘××¡××š ×§×™×™×
- `deleteDoc`: ××•×—×§ ××¡××š ××”-collection
- `doc(db, 'todos', id)`: ××¦×‘×™×¢ ×¢×œ ××¡××š ×¡×¤×¦×™×¤×™ ×œ×¤×™ ID

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ××¤×œ×™×§×¦×™×•×ª Todo ××• Task Management
âœ“ ×¨×©×™××•×ª ×“×™× ××™×•×ª ×©××ª×¢×“×›× ×•×ª ×‘×–××Ÿ ×××ª
âœ“ ××¤×œ×™×§×¦×™×•×ª ×©×“×•×¨×©×•×ª CRUD ××œ×
âœ“ ×¤×¨×•×™×§×˜×™× ×©×¦×¨×™×›×™× ×¡× ×›×¨×•×Ÿ ×‘×™×Ÿ ××©×ª××©×™×

×˜×™×¤×™×:
------
ğŸ’¡ `onSnapshot` ××—×–×™×¨ unsubscribe function - ×—×©×•×‘ ×œ×”×—×–×™×¨ ××•×ª×” ×‘-useEffect ×›×“×™ ×œ×× ×•×¢ memory leaks
ğŸ’¡ ×ª××™×“ ×‘×“×•×§ ×©×”×§×œ×˜ ×œ× ×¨×™×§ ×œ×¤× ×™ ×™×¦×™×¨×” (`input.trim()`)
ğŸ’¡ ×”×©×ª××© ×‘-ID ×©×œ ×”××¡××š ×›-key ×‘-React (`key={todo.id}`)
ğŸ’¡ Real-time updates ×¢×•×‘×“×™× ××•×˜×•××˜×™×ª - ××™×Ÿ ×¦×•×¨×š ×œ×¨×¢× ×Ÿ ×™×“× ×™×ª

```jsx
import { useState, useEffect } from 'react';
import {
  collection,
  addDoc,
  getDocs,
  updateDoc,
  deleteDoc,
  doc,
  onSnapshot
} from 'firebase/firestore';
import { db } from './firebase';

function TodoApp() {
  const [todos, setTodos] = useState([]);
  const [input, setInput] = useState('');

  useEffect(() => {
    const unsubscribe = onSnapshot(
      collection(db, 'todos'),
      (snapshot) => {
        setTodos(snapshot.docs.map(doc => ({
          id: doc.id,
          ...doc.data()
        })));
      }
    );
    return unsubscribe;
  }, []);

  const addTodo = async () => {
    if (input.trim()) {
      await addDoc(collection(db, 'todos'), {
        text: input,
        completed: false,
        createdAt: new Date()
      });
      setInput('');
    }
  };

  const toggleTodo = async (id, completed) => {
    await updateDoc(doc(db, 'todos', id), {
      completed: !completed
    });
  };

  const deleteTodo = async (id) => {
    await deleteDoc(doc(db, 'todos', id));
  };

  return (
    <div>
      <input
        value={input}
        onChange={(e) => setInput(e.target.value)}
        onKeyPress={(e) => e.key === 'Enter' && addTodo()}
      />
      <button onClick={addTodo}>Add</button>

      <ul>
        {todos.map(todo => (
          <li key={todo.id}>
            <input
              type="checkbox"
              checked={todo.completed}
              onChange={() => toggleTodo(todo.id, todo.completed)}
            />
            <span style={{ textDecoration: todo.completed ? 'line-through' : 'none' }}>
              {todo.text}
            </span>
            <button onClick={() => deleteTodo(todo.id)}>Delete</button>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

×“×•×’××” 2: Chat App
==================

××” ×–×” ×¢×•×©×”?
-----------
×“×•×’××” ×–×• ××¨××” ××™×š ×œ×™×¦×•×¨ ××¤×œ×™×§×¦×™×™×ª ×¦'××˜ ×¢× Firestore - ×”×•×“×¢×•×ª ××¡×•×“×¨×•×ª ×œ×¤×™ ×–××Ÿ ×¢× ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª.

××™×š ×–×” ×¢×•×‘×“?
------------
1. **Query ×¢× ×¡×™×“×•×¨**: `query` ×•-`orderBy` ××¡×“×¨×™× ×”×•×“×¢×•×ª ×œ×¤×™ ×–××Ÿ
2. **Real-time Messages**: `onSnapshot` ×××–×™×Ÿ ×œ×”×•×“×¢×•×ª ×—×“×©×•×ª ×•××¢×“×›×Ÿ ××ª ×”×××©×§
3. **×©×œ×™×—×ª ×”×•×“×¢×”**: `addDoc` ×™×•×¦×¨ ×”×•×“×¢×” ×—×“×©×” ×¢× timestamp
4. **×ª××¨×™×š ××•×˜×•××˜×™**: `createdAt: new Date()` ×©×•××¨ ××ª ×–××Ÿ ×”×©×œ×™×—×”

××” ×›×œ ×—×œ×§ ×‘×§×•×“?
----------------
- `query()`: ×™×•×¦×¨ query ××•×ª×× ×¢× ×ª× ××™×
- `orderBy('createdAt', 'asc')`: ××¡×“×¨ ×”×•×“×¢×•×ª ×œ×¤×™ ×–××Ÿ - asc = ××”×¢×ª×™×§ ×œ×—×“×©
- `onSnapshot(q, ...)`: ×××–×™×Ÿ ×œ-query ×¡×¤×¦×™×¤×™ ×‘××§×•× ×›×œ ×”-collection
- `createdAt: new Date()`: ×©×•××¨ ××ª ×–××Ÿ ×™×¦×™×¨×ª ×”×”×•×“×¢×”
- `userId`: ××–×”×” ××ª ×”×©×•×œ×— (×‘××¤×œ×™×§×¦×™×” ×××™×ª×™×ª ×–×” ×™×”×™×” ××”-authentication)

××ª×™ ×œ×”×©×ª××©?
------------
âœ“ ××¤×œ×™×§×¦×™×•×ª ×¦'××˜ ××• ×”×•×“×¢×•×ª
âœ“ ××¢×¨×›×•×ª ×ª×’×•×‘×•×ª ××• ×¤×•×¨×•××™×
âœ“ ×¢×“×›×•× ×™× ×‘×–××Ÿ ×××ª ×©×¦×¨×™×›×™× ×¡×™×“×•×¨
âœ“ ××¤×œ×™×§×¦×™×•×ª ×©×™×ª×•×¤×™×•×ª

×˜×™×¤×™×:
------
ğŸ’¡ `orderBy` ×“×•×¨×© index ×‘-Firestore - Firestore ×™×‘×§×© ×œ×™×¦×•×¨ ××•×ª×• ××•×˜×•××˜×™×ª
ğŸ’¡ ×”×©×ª××© ×‘-`asc` ×œ×¡×“×¨ ××”×¢×ª×™×§ ×œ×—×“×©, ××• `desc` ××”×—×“×© ×œ×¢×ª×™×§
ğŸ’¡ ×ª××™×“ ×©××•×¨ `createdAt` ×›×“×™ ×œ××¤×©×¨ ×¡×™×“×•×¨ ×œ×¤×™ ×–××Ÿ
ğŸ’¡ ×‘××¤×œ×™×§×¦×™×” ×××™×ª×™×ª, ×”×•×¡×£ authentication ×œ-`userId`
ğŸ’¡ ××¤×©×¨ ×œ×”×•×¡×™×£ `limit()` ×œ-query ×›×“×™ ×œ×”×’×‘×™×œ ××¡×¤×¨ ×”×•×“×¢×•×ª

```jsx
import { useState, useEffect } from 'react';
import {
  collection,
  addDoc,
  query,
  orderBy,
  onSnapshot
} from 'firebase/firestore';
import { db } from './firebase';

function ChatApp() {
  const [messages, setMessages] = useState([]);
  const [message, setMessage] = useState('');

  useEffect(() => {
    const q = query(
      collection(db, 'messages'),
      orderBy('createdAt', 'asc')
    );
    
    const unsubscribe = onSnapshot(q, (snapshot) => {
      setMessages(snapshot.docs.map(doc => ({
        id: doc.id,
        ...doc.data()
      })));
    });
    
    return unsubscribe;
  }, []);

  const sendMessage = async () => {
    if (message.trim()) {
      await addDoc(collection(db, 'messages'), {
        text: message,
        createdAt: new Date(),
        userId: 'user123'
      });
      setMessage('');
    }
  };

  return (
    <div>
      <div>
        {messages.map(msg => (
          <div key={msg.id}>{msg.text}</div>
        ))}
      </div>
      <input
        value={message}
        onChange={(e) => setMessage(e.target.value)}
        onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
      />
      <button onClick={sendMessage}>Send</button>
    </div>
  );
}
```

×¡×™×›×•×
======

×“×•×’×××•×ª ×©× ×œ××“×•:
âœ“ Todo App
âœ“ Chat App

×”××©×š ×œ×ª×¨×’×œ!

×‘×©×™×¢×•×¨ ×”×‘× × ×œ××“:
â†’ Testing ×‘-IDX
â†’ ×›×ª×™×‘×ª ×‘×“×™×§×•×ª

××•×›× ×™× ×œ×”××©×™×š? ğŸš€

---
Â© 2026 Google AI Academy
×“×•×’×××•×ª Firestore
×’×¨×¡×” 1.0
