×¢×‘×•×“×” ×¢× JSON Mode - ×”××“×¨×™×š ×”×©×œ×
===================================

×©×™×¢×•×¨ 4: ×¢×‘×•×“×” ×¢× JSON Mode
==============================

××” ×–×” JSON Mode?
================

JSON Mode ×”×•× ×ª×›×•× ×” ×©××›×¨×™×—×” ××ª ×”××•×“×œ ×œ×”×—×–×™×¨ ×ª×©×•×‘×•×ª ×‘×¤×•×¨××˜ JSON ××•×‘× ×”.
×–×” ××‘×˜×™×— ×©×”×¤×œ×˜ ×ª××™×“ ×™×”×™×” JSON ×ª×§× ×™ ×©× ×™×ª×Ÿ ×œ×¤×¨×¡×¨ ×‘×§×œ×•×ª.

×œ××” ×–×” ×—×©×•×‘?
=============

â€¢ ×¤×œ×˜ ××•×‘× ×” ×•×¢×§×‘×™
â€¢ ×§×œ ×œ×¤×¨×¡×¨ ×•×œ×¢×‘×“
â€¢ ××ª××™× ×œ-APIs
â€¢ ×¢×•×‘×“ ×˜×•×‘ ×¢× ××¤×œ×™×§×¦×™×•×ª

××™×š ×–×” ×¢×•×‘×“?
=============

1. ×”×’×“×¨×ª Response Schema
-------------------------
××’×“×™×¨×™× ××ª ×”××‘× ×” ×”×¨×¦×•×™ ×©×œ ×”-JSON:

```python
import google.generativeai as genai

genai.configure(api_key="YOUR_API_KEY")

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "age": {"type": "number"},
                "city": {"type": "string"}
            },
            "required": ["name", "age", "city"]
        }
    }
)

response = model.generate_content("×¦×•×¨ ×¤×¨×•×¤×™×œ ××©×ª××© ×œ×“×•×’××”")
print(response.text)
```

2. ×“×•×’××” ×‘×¡×™×¡×™×ª
----------------

```python
response_schema = {
    "type": "object",
    "properties": {
        "summary": {"type": "string"},
        "key_points": {
            "type": "array",
            "items": {"type": "string"}
        },
        "sentiment": {
            "type": "string",
            "enum": ["positive", "negative", "neutral"]
        }
    },
    "required": ["summary", "key_points", "sentiment"]
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": response_schema
    }
)

response = model.generate_content("× ×ª×— ××ª ×”×˜×§×¡×˜: [×˜×§×¡×˜]")
data = json.loads(response.text)
print(data["summary"])
```

3. ×©×™××•×© ×¢× System Instructions
---------------------------------

```python
model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": {
            "type": "object",
            "properties": {
                "title": {"type": "string"},
                "content": {"type": "string"},
                "tags": {
                    "type": "array",
                    "items": {"type": "string"}
                }
            }
        }
    },
    system_instruction="""××ª×” ×¢×•×–×¨ ×›×ª×™×‘×ª ×‘×œ×•×’×™×.
×ª××™×“ ×”×—×–×¨ ×ª×•×›×Ÿ ×‘×¤×•×¨××˜ JSON ××•×‘× ×”.
×›×œ×•×œ ×›×•×ª×¨×ª, ×ª×•×›×Ÿ ×•×ª×’×™×•×ª."""
)

response = model.generate_content("×›×ª×•×‘ ×¤×•×¡×˜ ×‘×œ×•×’ ×¢×œ AI")
data = json.loads(response.text)
```

×“×•×’×××•×ª ×©×™××•×©×™×•×ª
==================

×“×•×’××” 1: × ×™×ª×•×— ×¡× ×˜×™×× ×˜
------------------------

```python
sentiment_schema = {
    "type": "object",
    "properties": {
        "sentiment": {
            "type": "string",
            "enum": ["positive", "negative", "neutral"]
        },
        "confidence": {"type": "number", "minimum": 0, "maximum": 1},
        "key_phrases": {
            "type": "array",
            "items": {"type": "string"}
        }
    },
    "required": ["sentiment", "confidence", "key_phrases"]
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": sentiment_schema
    }
)

response = model.generate_content("× ×ª×— ××ª ×”×¡× ×˜×™×× ×˜: '×”××•×¦×¨ ×”×–×” ××¢×•×œ×”!'")
data = json.loads(response.text)
print(f"Sentiment: {data['sentiment']}")
print(f"Confidence: {data['confidence']}")
```

×“×•×’××” 2: ×—×™×œ×•×¥ ××™×“×¢
---------------------

```python
extraction_schema = {
    "type": "object",
    "properties": {
        "name": {"type": "string"},
        "email": {"type": "string"},
        "phone": {"type": "string"},
        "company": {"type": "string"}
    },
    "required": ["name", "email"]
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": extraction_schema
    }
)

text = "×©××™ ×™×•×¡×™ ×›×”×Ÿ, ×”××™××™×™×œ ×©×œ×™ ×”×•× yossi@example.com"
response = model.generate_content(f"×—×œ×¥ ××™×“×¢ ××”×˜×§×¡×˜: {text}")
data = json.loads(response.text)
```

×“×•×’××” 3: ×™×¦×™×¨×ª ×¨×©×™××ª ××©×™××•×ª
------------------------------

```python
todo_schema = {
    "type": "object",
    "properties": {
        "todos": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "task": {"type": "string"},
                    "priority": {
                        "type": "string",
                        "enum": ["high", "medium", "low"]
                    },
                    "due_date": {"type": "string"}
                },
                "required": ["task", "priority"]
            }
        }
    },
    "required": ["todos"]
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": todo_schema
    }
)

response = model.generate_content("×¦×•×¨ ×¨×©×™××ª ××©×™××•×ª ×œ×¤×¨×•×™×§×˜ AI")
data = json.loads(response.text)
for todo in data["todos"]:
    print(f"- {todo['task']} ({todo['priority']})")
```

×“×•×’××” 4: × ×™×ª×•×— ××•×¦×¨
---------------------

```python
product_schema = {
    "type": "object",
    "properties": {
        "name": {"type": "string"},
        "description": {"type": "string"},
        "features": {
            "type": "array",
            "items": {"type": "string"}
        },
        "price_range": {
            "type": "object",
            "properties": {
                "min": {"type": "number"},
                "max": {"type": "number"}
            }
        },
        "target_audience": {
            "type": "array",
            "items": {"type": "string"}
        }
    },
    "required": ["name", "description", "features"]
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config={
        "response_mime_type": "application/json",
        "response_schema": product_schema
    }
)

response = model.generate_content("×¦×•×¨ ×¤×¨×•×¤×™×œ ××•×¦×¨ ×œ×¡×××¨×˜×¤×•×Ÿ ×—×“×©")
data = json.loads(response.text)
```

Best Practices
==============

1. ×”×’×“×¨ Schema ××“×•×™×§
---------------------
â€¢ ×¦×™×™×Ÿ ××ª ×›×œ ×”×©×“×•×ª ×”× ×“×¨×©×™×
â€¢ ×”×©×ª××© ×‘-enums ×œ×¢×¨×›×™× ×§×‘×•×¢×™×
â€¢ ×”×’×“×¨ types × ×›×•×Ÿ
â€¢ ×”×•×¡×£ validations

2. ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
------------------
```python
try:
    response = model.generate_content("×˜×§×¡×˜")
    data = json.loads(response.text)
except json.JSONDecodeError as e:
    print(f"×©×’×™××” ×‘×¤×¨×¡×•×¨ JSON: {e}")
except Exception as e:
    print(f"×©×’×™××”: {e}")
```

3. ×‘×“×™×§×ª Schema
-----------------
```python
import jsonschema

schema = {...}  # ×”-Schema ×©×œ×š
data = json.loads(response.text)

try:
    jsonschema.validate(instance=data, schema=schema)
    print("JSON ×ª×§×™×Ÿ!")
except jsonschema.ValidationError as e:
    print(f"×©×’×™××ª validation: {e}")
```

4. ×©×™××•×© ×¢× Type Hints
-----------------------
```python
from typing import TypedDict

class ProductInfo(TypedDict):
    name: str
    price: float
    features: list[str]

response = model.generate_content("...")
data: ProductInfo = json.loads(response.text)
```

×˜×™×¤×™× ××ª×§×“××™×
===============

1. Nested Objects
------------------
```python
schema = {
    "type": "object",
    "properties": {
        "user": {
            "type": "object",
            "properties": {
                "name": {"type": "string"},
                "address": {
                    "type": "object",
                    "properties": {
                        "street": {"type": "string"},
                        "city": {"type": "string"}
                    }
                }
            }
        }
    }
}
```

2. Arrays ×¢× Objects
---------------------
```python
schema = {
    "type": "object",
    "properties": {
        "items": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": {"type": "number"},
                    "name": {"type": "string"}
                }
            }
        }
    }
}
```

3. Optional Fields
------------------
```python
schema = {
    "type": "object",
    "properties": {
        "required_field": {"type": "string"},
        "optional_field": {"type": "string"}
    },
    "required": ["required_field"]
    # optional_field ×œ× ×‘-required
}
```

4. Enums
---------
```python
schema = {
    "type": "object",
    "properties": {
        "status": {
            "type": "string",
            "enum": ["pending", "approved", "rejected"]
        }
    }
}
```

×¡×™×›×•×
======

JSON Mode ×××¤×©×¨:
âœ“ ×¤×œ×˜ ××•×‘× ×” ×•×¢×§×‘×™
âœ“ ×§×œ ×œ×¤×¨×¡×¨ ×•×œ×¢×‘×“
âœ“ ××ª××™× ×œ-APIs
âœ“ ×¢×•×‘×“ ×˜×•×‘ ×¢× ××¤×œ×™×§×¦×™×•×ª

Best Practices:
â€¢ ×”×’×“×¨ Schema ××“×•×™×§
â€¢ ×˜×™×¤×•×œ ×‘×©×’×™××•×ª
â€¢ ×‘×“×™×§×ª Schema
â€¢ ×©×™××•×© ×¢× Type Hints

×‘×©×™×¢×•×¨ ×”×‘×: Image Understanding! ğŸš€

---
Â© 2026 Google AI Academy
×¢×‘×•×“×” ×¢× JSON Mode - ×”××“×¨×™×š ×”×©×œ×